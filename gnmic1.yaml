encoding: json_ietf
log: true

targets:
  10.83.12.79:443:
    token: "PLACE_YOUR_CVP_SVC_ACCOUNT_TOKEN_HERE"
subscriptions:
    tp-avd-leaf1:
     paths:
       - openconfig:/interfaces/interface/state/admin-status
       - openconfig:/interfaces/interface/state/oper-status
       - openconfig:/components/component/cpu
       - openconfig:/components/component/state/memory
       - openconfig:/interfaces/interface/state/counters
       - openconfig:/network-instances/network-instance/protocols/protocol/bgp/
     target: BAD032986065E8DC14CBB6472EC314A6
    tp-avd-leaf2:
     paths:
       - openconfig:/interfaces/interface/state/admin-status
       - openconfig:/interfaces/interface/state/oper-status
       - openconfig:/components/component/cpu
       - openconfig:/components/component/state/memory
       - openconfig:/interfaces/interface/state/counters
       - openconfig:/network-instances/network-instance/protocols/protocol/bgp/
     target: 6323DA7D2B542B5D09630F87351BEA41

processors:
  set-timestamp-processor:
    event-override-ts:
      precision: ms

outputs:
  influxdb-output:
    type: influxdb
    url: http://influxdb:8086
    org: arista
    bucket: telemetry # db name
    token: "PLACE_YOUR_CVP_SVC_ACCOUNT_TOKEN_HERE"
    batch-size: 1000
    flush-timer: 10s
    override-timestamps: true
